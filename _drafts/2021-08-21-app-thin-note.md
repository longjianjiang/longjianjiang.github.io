
# App 包体积优化

优化包体积的一个重要因素是，超过200M使用流量下载会有提示（虽然现在可以设置允许），所以一般的临界值也是200M。

优化之前需要了解app中到底有哪些部分组成，然后针对这不同对部分进行优化即可。

# ipa

安装app时时xx.ipa的包，将ipa解压后Payload文件夹下会有一个.app文件。打开app文件后，可以看到由以下几部分组成：

## 各种资源 

图片，音频，json，html，bundle，xib，plist，lproj等等。

优化点如下：

1. 对于这些资源，避免重复添加，删除[无用的资源](https://github.com/tinymind/LSUnusedResources)。

2. 对于图片，音频之类的资源，可以进行压缩减少体积。

3. 使用xcassets可以帮助优化，对于png，压缩后xcassets的car文件中图片资源根据设备进行选择，不会同时包含2x和3x。 

4. 大图使用服务器下载的方案。

## CodeSignature

代码签名，这部分内容的生成是使用证书签名所产生的数据。

## framework

库文件。

对于framework的优化其实就是，选择最小化的解决方案，比如解决某个问题引入了某个第三方库，只是仅仅用了提供功能的小部分，剩余部分其实就比较多余了。

## 可执行文件

由源码编译链接运行产生的结果文件。

优化点如下：

1. 优化代码

去除无用的方法，无用的类，无用的源文件；

2. 编译优化

这部分相对简单，比如去除debug符号信息，编译选项增加优化选项等等。

# 总结

其实可以发现主要的优化点还是在于平时是否由一个良好的习惯，很多东西都是积累而导致的问题。

所以在开发过程中，首先查看这个功能有咩有已有组件，是否可以复用，还是在原有基础上扩展，最后才是自己实现。

对于废弃的代码，文件，模块，及时清除，这样不仅仅减少无用的对象，同时对于阅读和理解也能减轻负担。

# References

[https://zhoujinying.github.io/2019/09/05/iOS%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96/](https://zhoujinying.github.io/2019/09/05/iOS%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96/)

[https://www.jianshu.com/p/a3151dfebc9c](https://www.jianshu.com/p/a3151dfebc9c)
