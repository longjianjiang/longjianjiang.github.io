---
layout: post
title:  "TCP学习笔记"
date:   2019-01-23
excerpt:  "本文是笔者学习TCP协议的笔记"
tag:
- Networking
comments: true
---

TCP是传输层的一个协议，我们常用的HTTP就是通过TCP建立连接的，下面笔者使用 `Wireshark` 观察TCP建立连接的过程。

# 三次握手

因为HTTP是通过TCP建立连接的，所以在HTTP之前，首先得通过TCP建立连接，而TCP连接需要三步，也就是我们常说的三次握手。

笔者方法浏览器中访问 `http://www.longjianjiang.com/tags/`, 可以看到 GET请求之前，会有三次TCP建立连接的过程：

![tcp_note_1]({{site.url}}/assets/images/blog/tcp_note_1.png)

- SYN

client 向 server 发送请求，SYN标志位设为1，生成一个随机Sequence number `x`，如下所示:

![tcp_note_2]({{site.url}}/assets/images/blog/tcp_note_2.png)

- SYN + ACK

server 收到数据后，SYN和ACK标志位设为1，生成一个随机Sequence number `y`，将Acknowledgment number 设置为 `x`+1，如下所示:

![tcp_note_3]({{site.url}}/assets/images/blog/tcp_note_3.png)

- ACK

client 收到数据后，ACK标志位设为1，Sequence number设置为`x`+1, Acknowledgment number 设置为 `y`+1, 如下所示:

![tcp_note_4]({{site.url}}/assets/images/blog/tcp_note_4.png)

整个过程如下所示:

![tcp_note_5]({{site.url}}/assets/images/blog/tcp_note_5.png)