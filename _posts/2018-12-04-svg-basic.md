---
layout: post
title:  "SVG格式初探"
date:   2018-11-28
excerpt:  "本文是笔者学习SVG的笔记"
tag:
- Tutorial
comments: true
---

笔者最近工作中接触到SVG，之前没有用到过，在此记录下来。

SVG是一种可缩放的矢量图形，使用XML格式来定义。

## 格式

```
<?xml version="1.0" encoding="UTF-8"?>
<svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="border:1px solid #7798CB">
    <circle cx="20" cy="20" r="20" stroke="green" stroke-width="4" fill="yellow" />
</svg>
```

上面的SVG的内容大小是(40,40),里面定义了一个圆，半径20，圆心在(20, 20),该圆的填充色为黄色，有4的绿色边框。

> 新建一个文件test.svg, 将上面的内容复制到文件中，用浏览器打开就可以看到效果;

## viewport & viewBox

viewport是SVG中可见的区域。 比如下面定义了一个viewport宽为500px，高为300px。

> width 和 height 默认单位为 px;

```
<SVG width="500" height="300"></SVG>
```

viewBox 这个属性可以改变SVG中的内容的展示，默认我们设置 viewBox 为 (0, 0, w, h), w h 就是 viewport的 width 和 height。

下面以一个例子来说明，SVG内容&显示如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg width="400px" height="400px" viewBox="0 0 400 400" version="1.1" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="border:1px solid #7798CB">
    <circle cx="100" cy="100" r="100" stroke="green" stroke-width="1" fill="yellow" />
</svg>
```

![img_1]({{site.url}}/assets/images/blog/svg_basic_1.png)

矩形所示区域就是viewport，也就是SVG的可见区域，现在的viewBox的大小和viweport一样，所以圆的圆心在(100,100),半径为100。

现在我们将viewBox 改为 "0 0 40 40", 此时SVG显示如下所示:

![img_2]({{site.url}}/assets/images/blog/svg_basic_2.png)

可以这样理解，circle 的 `cx`, `cy`, `r`参数的值需要参考viewBox 与 viewport的比例，默认 viewBox的值为"0 0 400 400"，此时一比一的关系，circle的三个参数正常显示在矩形中。 

现在viewBox宽高相比 viewport 缩小了 10倍，也就是说现在viewBox中1个单位在viewport中需要占10个单位，所以此时圆心是(1000,1000),半径为1000，又因为SVG的可见区域就是图中所示矩形区域，所以新的圆超过部分就看不到了。

现在我们将viewBox 改为 "0 0 4000 4000"， 此时SVG显示如下所示:

![img_3]({{site.url}}/assets/images/blog/svg_basic_3.png)

现在viewBox宽高相比 viewport 放大了 10倍，也就是说现在viewBox中1个单位在viewport中需要占0.1个单位，所以此时圆心是(10,10),半径为10。

## 标签

SVG中有很多常见的图形标签，比如上面用到的`circle`是用来显示一个圆形。

```
// 圆
<circle cx="20" cy="20" r="20" stroke="green" stroke-width="4" fill="yellow" />

// 矩形
<rect width="300" height="100" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />

// 椭圆
<ellipse cx="200" cy="80" rx="100" ry="50" style="fill:yellow;stroke:purple;stroke-width:2" />

// 直线
<line x1="0" y1="0" x2="200" y2="200" style="stroke:rgb(255,0,0);stroke-width:2" />

// 多边形
<polygon points="220,10 300,210 170,250 123,234" style="fill:lime;stroke:purple;stroke-width:1" />

// 曲线
<polyline points="20,20 40,25 60,40 80,120 120,140 200,180" style="fill:none;stroke:black;stroke-width:3" />

// 文字
<text x="0" y="15" fill="red">I love SVG!</text>

<path d="M150 0 L75 200 L225 200 Z" />
```