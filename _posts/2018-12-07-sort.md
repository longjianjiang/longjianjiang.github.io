---
layout: post
title:  "æ’åº"
date:   2018-12-07
excerpt:  "æœ¬æ–‡æ˜¯ç¬”è€…æ€»ç»“æ’åºçš„ç¬”è®°"
tag:
- Algorithm
comments: true
---

> ç¬”è€…æœ€è¿‘åœ¨åˆ·Leetcodeç®—æ³•é¢˜ï¼Œå¾ˆå¤šé¢˜ç›®éƒ½å’Œæ’åºæœ‰å…³ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œç¬”è€…å°†è‡ªå·±å¯¹å¸¸è§æ’åºç®—æ³•çš„å­¦ä¹ å’Œæ€»ç»“è®°å½•ä¸‹æ¥ã€‚

# merge sort

å½’å¹¶æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(nlogn), æ¯”è¾ƒé«˜æ•ˆçš„ä¸€ç§æ’åºã€‚

æ€è·¯æ˜¯ï¼š

1. å°†ä¸€ä¸ªæ— åºçš„æ•°ç»„åˆ†æˆå‡ç­‰çš„ä¸¤éƒ¨åˆ†ï¼Œç›´åˆ°ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶ä¹Ÿå°±æ˜¯æœ‰åºäº†ã€‚
2. å½“æ‰€æœ‰å°çš„éƒ¨åˆ†éƒ½æ˜¯æœ‰åºåï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦å°†ä¸¤è¾¹æœ‰åºçš„éƒ¨åˆ†åˆå¹¶ï¼Œé‡å¤ï¼Œæœ€åæ•°ç»„å…¨éƒ¨æœ‰åºã€‚

æ•´ä¸ªè¿‡ç¨‹å°±å¦‚ä¸‹å›¾æ‰€ç¤º:

![img_1]({{site.url}}/assets/images/blog/sort_1.png)

> åˆå¹¶çš„æ—¶å€™åˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ–°å»ºä¸€ä¸ªæ•°ç»„è¿›è¡Œæ’åºï¼Œå¦ä¸€ç§åˆ™ä¸éœ€è¦æ–°å»ºã€‚

ä¸‹é¢æ˜¯ç¬”è€…ç”¨C++å†™çš„ä¸€ä¸ªå½’å¹¶æ’åº, åˆå¹¶ä¸æ–°å»ºæ•°ç»„:

{% highlight cpp %}
void mergeSort(vector<int>& list) {
    if (list.size() <= 1) { return; }
    auto half = list.size() / 2;
    
    vector<int> left = vector<int>(list.begin(), list.begin() + half);
    vector<int> right = vector<int>(list.begin() + half, list.end());
    
    mergeSort(left);
    mergeSort(right);
    
    auto leftIdx = 0, rightIdx = 0, idx = 0;
    while (leftIdx < left.size() && rightIdx < right.size()) {
        if (left[leftIdx] < right[rightIdx]) {
            list[idx++] = left[leftIdx++];
        } else {
            list[idx++] = right[rightIdx++];
        }
    }
    
    while (leftIdx < left.size()) {
        list[idx++] = left[leftIdx++];
    }
    while (rightIdx < right.size()) {
        list[idx++] = right[rightIdx++];
    }
}
{% endhighlight %}

æ—¶é—´å¤æ‚åº¦ï¼Œä»é€»è¾‘ä¸Šæ¥çœ‹ï¼Œå°±å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬é¦–å…ˆè¿›è¡Œæ‹†åˆ†nä¸ªå…ƒç´ ï¼Œç›´åˆ°å…ƒç´ ä¸ªæ•°ä¸º1ï¼Œè¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºŒåˆ†æŸ¥æ‰¾ã€‚

ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¯æ¬¡æŸ¥æ‰¾çš„åŒºé—´ä¸ºnï¼Œn/2ï¼Œn/4, ... , n/2^kã€‚ è€Œä¸” n/2^k æœ€ç»ˆä¼šç­‰äº1ï¼Œè¿™ä¸ªæ—¶å€™ä¹Ÿå°±ä¸èƒ½å†æ‹†åˆ†äº†ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªå…ƒç´ äº†ã€‚å½“ n/2^k = 1 æ—¶å€™ï¼Œ æˆ‘ä»¬çŸ¥é“ k = log2n, ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€å…±éœ€è¦æ‹†åˆ† log2næ¬¡ï¼Œæ‰€ä»¥è¿™ä¸ªæ‹†åˆ†çš„è¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(logn)ã€‚

æ‹†åˆ†å®Œä¹‹åéœ€è¦åˆå¹¶æœ‰åºçš„æ®µï¼Œæ¯æ¬¡åˆå¹¶éœ€è¦ O(n) çš„æ—¶é—´ï¼Œä¸€æ¬¡åˆå¹¶éƒ¨åˆ†æœ‰åºï¼Œç»è¿‡ O(logn) æ¬¡åå®Œå…¨æœ‰åºï¼Œæ‰€ä»¥æ•´ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(nlogn)ã€‚

# quick sort

å¿«é€Ÿæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ï¼ŒåŒæ ·æ˜¯ä¸€ç§é«˜æ•ˆçš„æ’åºæ–¹å¼ã€‚

æ€è·¯å¦‚ä¸‹ï¼š

1. æ‰¾ä¸€ä¸ªå‚ç…§æ•°ï¼Œä¸€èˆ¬æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ ï¼›
2. æ ¹æ®å‚ç…§æ•°ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œåˆ’åˆ†ï¼Œå°äºå‚ç…§æ•°çš„åœ¨å·¦è¾¹ï¼Œå¤§äºå‚ç…§æ•°çš„åœ¨å³è¾¹ï¼Œç­‰äºå‚ç…§æ•°çš„ä½ç½®ä¸¤è¾¹éƒ½è¡Œï¼›
3. å°†ä¸¤è¾¹åˆ†åˆ«é€’å½’è°ƒç”¨ï¼›

æ‰€ä»¥ä¸Šè¿°æ­¥éª¤ä¸­ç¬¬äºŒæ­¥éª¤åˆ’åˆ†æ˜¯æœ€é‡è¦çš„ï¼Œç§°ä¸º`partition`ã€‚å› ä¸ºé€šè¿‡è¿™åˆ’åˆ†æ­¥éª¤æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªä½ç½® p ï¼Œæ ¹æ®ä½ç½® p å°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤ç»„è¿›è¡Œé€’å½’ã€‚æ‰€ä»¥å¿«æ’åŒæ ·ä¹Ÿæ˜¯ä½¿ç”¨äº†åˆ†è€Œæ²»ä¹‹çš„æ€æƒ³ã€‚

## Hoare

ä¸‹é¢ç¬”è€…ä»‹ç» Hoare ç‰ˆæœ¬ã€‚Hoare ç‰ˆæœ¬ä¹Ÿæœ‰ä¸¤ç§ä¸åŒçš„å®ç°ï¼Œä¸€ç§ç§°ä¸º'ç©ºç©´', å¦ä¸€ç§åˆ™ç›´æ¥äº¤æ¢å…ƒç´ ï¼Œä¸äº§ç”Ÿ'ç©ºç©´'ã€‚

- ç›´æ¥äº¤æ¢å…ƒç´ 

{% highlight cpp %}
int myPartition(vector<int>& list, int left, int right) {
    int pivot = list[left];
    int i = left, j = right;
    while (i <= j) {
        while (list[i] < pivot) {
            i++;
        }
        while (list[j] > pivot) {
            j--;
        }
        if (i <= j) {
            swap(list[i], list[j]);
            i++;
            j--;
        }
    }
    return i;
}

void myQuickSort(vector<int>& list, int left, int right) {
    countNumber++;
    int p = myPartition(list, left, right);
    if ((p-1) > left) {
        myQuickSort(list, left, p-1);
    }
    if (p < right) {
        myQuickSort(list, p, right);
    }
}
{% endhighlight %}

é€‰å–ä¸€ä¸ªå‚ç…§æ•° pivotï¼Œä¸€èˆ¬é€‰ç¬¬ä¸€ä¸ªã€‚ç›´æ¥äº¤æ¢å…ƒç´ çš„æ–¹æ³•ä½¿ç”¨å¤´å°¾æŒ‡é’ˆ i, jï¼Œä¸€ä¸ªåŸåˆ™å°±æ˜¯å°äº pivot çš„åœ¨å·¦è¾¹ï¼Œå¤§äº pivot çš„åœ¨å³è¾¹ï¼Œæ‰€ä»¥é¦–å…ˆè¿‡æ»¤å·¦å³åˆæ³•æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯å·¦è¾¹å°äºpivotï¼Œå³è¾¹å¤§äºpivotï¼‰ï¼Œç„¶åäº¤æ¢ä¸€ç»„ï¼Œå°çš„åœ¨å·¦ï¼Œå¤§çš„åœ¨å³ï¼Œç›´åˆ° i > j ä¸€æ¬¡éå†ç»“æŸã€‚

ä¸€æ¬¡éå†åï¼Œå°† i è¿”å›ï¼Œä¹Ÿå°±æ˜¯ i å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„ä½ç½® pã€‚ å…¶å®å‡†ç¡®çš„è¯´æ˜¯ä¸¤ä¸ªä½ç½®ï¼Œä¸€ä¸ªæ˜¯[left, p1], å¦ä¸€ä¸ªæ˜¯[p, right]ã€‚p1 ç­‰äº p-1, p2 ç­‰äº pã€‚ è¿™é‡Œéœ€è¦åˆ¤æ–­ p1 å’Œ p2 çš„åˆæ³•æ€§ï¼Œæ‰€ä»¥é€’å½’ä¹‹å‰éœ€è¦å’Œ left å’Œ right æ¯”è¾ƒã€‚

æ¯ä¸€æ¬¡partitionå¯ä»¥è¯´æ˜¯è®©æ•°ç»„éƒ¨åˆ†æœ‰åºï¼Œä¹‹åå°†æ•°ç»„æ‹†åˆ†ä¸¤éƒ¨åˆ†ï¼Œç»§ç»­ä½¿å…¶æœ‰åºï¼Œç›´åˆ°ä¸èƒ½æ‹†åˆ†ï¼Œæœ€åç»“æŸæ•°ç»„ä¸­çš„å…ƒç´ è‡ªç„¶å°±å…¨éƒ¨æœ‰åºäº†ã€‚

ä¸Šé¢çš„ `myPartition` å…¶å®ä¸å”¯ä¸€ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ª `myPartitionVersion2` åŒæ ·ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œä¸ç®¡æ€æ ·ï¼Œç›®æ ‡å°±æ˜¯è¿”å›ä¸€ä¸ªæ‹†åˆ†æ•°ç»„çš„ä½ç½® p.

{% highlight cpp %}
int myPartitionVersion2(vector<int>& list, int left, int right) {
    int pivot = list[left];
    int i = left, j = right;
    while (1) {
        while (list[i] < pivot) {
            i++;
        }
        while (list[j] > pivot) {
            j--;
        }

        if (i == j) {
            return i;
        } else if (i > j) {
            return i-1;
        }

        swap(list[i], list[j]);
        i++;
        j--;
    }
}
{% endhighlight %}

- ç©ºç©´

{% highlight cpp %}
int partition(vector<int>& list, int left, int right) {
    int pivot = list[left];
    int i = left, j = right;
    while (i < j) {
        while (i < j && list[j] >= pivot) {
            j--;
        }
        if (i < j) { list[i] = list[j]; }
        
        while (i < j && list[i] <= pivot) {
            i++;
        }
        if (i < j) { list[j] = list[i]; }
    }
    list[i] = pivot;
    return i;
}

void quickSort(vector<int>& list, int left, int right) {
    if (left >= right) {
        return;
    }
    int p = partition(list, left, right);
    quickSort(list, left, p-1);
    quickSort(list, p+1, right);
}
{% endhighlight %}

ç©ºç©´æ–¹æ³•é¦–å…ˆè¿˜æ˜¯é€‰å®šä¸€ä¸ªå‚ç…§æ•° pivot = list[left], å·¦å³ä¸¤ä¸ªæŒ‡é’ˆ i, jï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å°†æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºä¸€ä¸ªå‚ç…§æ•°ï¼ŒåŒæ—¶å°†å…¶å­˜æ”¾èµ·æ¥äº†ã€‚

ç°åœ¨æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ•°å­—çš„ä½ç½®ç­‰äºä¸€ä¸ªç©ºç©´ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä»åå¾€å‰æ‰¾ä¸€ä¸ªå°äºç­‰äº pivot çš„æ•°ï¼Œå¦‚æœæ‰¾åˆ°å°†å…¶æ”¾è¿›ç©ºç©´ï¼Œæ”¾å®Œä»¥åç©ºç©´å°±æˆäº†å­˜æ”¾åˆšåˆšé‚£ä¸ªæ•°å­—çš„ä½ç½®ã€‚

è¿™ä¸ªæ—¶å€™ä»å‰å¾€åæ‰¾ä¸€ä¸ªå¤§äºç­‰äº pivot çš„æ•°å­—ï¼Œå°†å…¶æ”¾è¿›ç©ºç©´ï¼Œå¾ªç¯ï¼Œç›´åˆ°å·¦å³ä¸¤ä¸ªæŒ‡é’ˆç›¸ç­‰åœæ­¢ï¼Œå°† pivot çš„æ•°å­—æ”¾åˆ° æŒ‡é’ˆåœæ­¢çš„ä½ç½®ã€‚æ­¤æ—¶è¿”å› i ã€‚

å¾—åˆ° p å ï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€è¦é€’å½’çš„ä½¿ [left, p-1] , [p+1, right] æœ‰åºï¼Œé‚£ä¹ˆæ•´ä¸ªæ•°ç»„ä¹Ÿå°±æœ‰åºäº†ã€‚

> å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬ç§»åŠ¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œå½“æ•°å­—ç­‰äº pivot æ—¶å€™ï¼Œ æˆ‘ä»¬ä¹Ÿç§»åŠ¨äº†æŒ‡é’ˆï¼Œå› ä¸ºå¦‚æœæ•°ç»„ä¸­æœ‰é‡å¤å…ƒç´ ï¼Œæ²¡æœ‰ç§»åŠ¨æŒ‡é’ˆå°±ä¼šæ­»å¾ªç¯ã€‚

## Lomuto

Lomuto ä¹Ÿæ˜¯ä¸€ç§ partition çš„æ–¹å¼ã€‚

{% highlight cpp %}
int partition_lomuto(vector<int>& list, int left, int right) {
    int pivot = list[right];
    int i = left;
    for (int j = left; j < right; ++j) {
        if (list[j] < pivot) {
            if (i != j) {
                swap(list[i], list[j]);
            }
            i++;
        }
    }
    if (i == right) {
        return i-1;
    } else {
        swap(list[i], list[right]);
        return i;
    }
}

void quickSortVersion4(vector<int>& list, int left, int right) {
    if (left >= right) {
        return;
    }
    countNumber++;
    int p = partition_lomuto(list, left, right);
    quickSortVersion4(list, left, p);
    quickSortVersion4(list, p+1, right);
}
{% endhighlight %}

è¿™ç§ partition çš„æ–¹å¼é€‰å–çš„å‚ç…§æ•°æ˜¯æœ€å³è¾¹çš„ï¼ŒåŒæ—¶è®¾å®šä¸€ä¸ªæŒ‡é’ˆåœ¨æœ€å·¦è¾¹ i ï¼Œç„¶åä¸€ä¸ªå¾ªç¯ j ä»å¤´å¼€å§‹ï¼Œå½“å¾ªç¯çš„ä½ç½®çš„æ•°å­—å°äº pivot ï¼ŒåŒæ—¶ i ä¸ç­‰äº j çš„æ—¶å€™äº¤æ¢ä½ç½®ï¼Œå› ä¸ºæ­¤æ—¶ j æ‰€åœ¨çš„æ•°å­—æ˜¯å°äº pivot è€Œ i æ‰€åœ¨çš„ä½ç½®æ˜¯å¤§äº pivot çš„ã€‚

å¦‚æœ i ç­‰äº rightï¼Œ æ­¤æ—¶è¯´æ˜ right æ‰€åœ¨çš„æ•°å­—å°±æ˜¯è¿™ç»„æ•°å­—ä¸­æœ€å¤§çš„ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› i - 1ã€‚

å¦‚æœ i å°äº rightï¼Œ æ­¤æ—¶éœ€è¦äº¤æ¢ i å’Œ right å¯¹åº”ä½ç½®çš„æ•°å­—ï¼Œå°† i æ‰€åœ¨ æ•°å­— å¤§äº pivot çš„æ”¾åœ¨æ•°ç»„åé¢ï¼Œè¿”å› iã€‚

æœ€å åªéœ€è¦ é€’å½’ [left, p], [p+1, right] å³å¯ã€‚

# bubble sort & selection sort

- å†’æ³¡æ’åº

å†’æ³¡æ’åºç¬”è€…åœ¨å¤§å­¦Cè¯­è¨€è¯¾ç¨‹ä¸­å°±å­¦è¿‡ï¼Œä¸»è¦æ€è·¯æ˜¯æ¯æ¬¡å°†æ•°ç»„ä¸­æœ€å¤§çš„æ•°æ”¾åˆ°æœ€åï¼Œç›´åˆ°æ•°ç»„æœ‰åºã€‚

å¯ä»¥åŠ ä¸€ä¸ª flag æ¥åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºæœ‰åºçš„ï¼Œå› ä¸ºè‡³å°‘ä¼šèµ°ä¸€è¶Ÿæ’åºï¼Œå½“æ²¡æœ‰è¿›è¡Œäº¤æ¢å…ƒç´ ï¼Œè¯´æ˜æ­¤æ—¶æ•°ç»„å°±æ˜¯æœ‰åºçš„ï¼Œæ¥ä¸‹æ¥çš„æ’åºå°±ä¸éœ€è¦äº†ã€‚

{% highlight cpp %}
void bubbleSort(vector<int>& list) {
    int count = (int)list.size();
    bool swapped;
    for (int i = 0; i < count-1; ++i) {
        swapped = false;
        for (int j = 0; j < count-i-1; ++j) {
            if (list[j+1] < list[j]) {
                swap(list[j+1], list[j]);
                swapped = true;
            }
        }
        if (swapped == false) {
            break;
        }
    }
}
{% endhighlight %}

ä¸¤ä¸ªå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯è¡¨ç¤ºçš„éœ€è¦æ¯”è¾ƒçš„è¶Ÿæ•°ï¼Œn ä¸ª æ•° åªéœ€è¦ æ¯”è¾ƒ n-1 è¶Ÿï¼Œå› ä¸ºä¸€ä¸ªæ•°æ—¶å¹¶ä¸éœ€è¦æ¯”è¾ƒäº†ã€‚

ç¬¬äºŒä¸ªå¾ªç¯å› ä¸ºå·²ç»æœ‰ i ä¸ªæœ€å¤§çš„åœ¨åé¢ï¼Œæ‰€ä»¥å¾ªç¯æ¬¡æ•°é¢å¤–å‡å» iã€‚

å†’æ³¡æ’åºæ—¶é—´å¤æ‚åº¦æœ€å¥½ä¹Ÿå°±æ˜¯æ•°ç»„æœ‰åºæ—¶ä¸º O(n), æœ€å·®åˆ™æ˜¯ O(n^2)ã€‚

- é€‰æ‹©æ’åº

é€‰æ‹©æ’åºç¬”è€…åŒæ ·æ˜¯åœ¨å¤§å­¦Cè¯­è¨€è¯¾ç¨‹ä¸­ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°ï¼Œæ€è·¯å’Œå†’æ³¡æ’åºç±»ä¼¼ï¼Œåªæ˜¯ä¸€æ¬¡éå†å°†æœ€å°çš„æ”¾åˆ°æœ€å‰é¢ï¼Œç›´åˆ°æ•°ç»„æœ‰åºã€‚

{% highlight cpp %}
void selectionSort(vector<int>& list) {
    for (int i = 0; i < list.size(); ++i) {
        int minIdx = i;
        for (int j = i+1; j < list.size(); ++j) {
            if (list[j] < list[minIdx]) {
                minIdx = j;
            }
        }
        swap(list[i], list[minIdx]);
    }
}
{% endhighlight %}

é€‰æ‹©æ’åºçš„æ—¶é—´å¤æ‚åº¦ O(n^2)ã€‚

# insertion sort

æ’å…¥æ’åºï¼Œå’Œé€‰æ‹©æ’åºç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€æ¬¡éå†å°†æœ€å°çš„æ”¾åˆ°æœ€å‰é¢ï¼Œä¸è¿‡æ²¡æœ‰è¿›è¡Œäº¤æ¢ï¼Œè€Œæ˜¯ä¸æ–­ç§»åŠ¨å…ƒç´ ã€‚

å°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ[0] [1,n], é»˜è®¤è®©æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºä¸€ç»„ï¼Œä¹Ÿæ˜¯æœ‰åºçš„ï¼Œç„¶åä»1å¼€å§‹å¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯ï¼Œå°†list[i] æ’å…¥åˆ°å‰é¢æœ‰åºæ•°ç»„ä¸­åˆé€‚çš„ä½ç½®ï¼Œç›´åˆ°éå†åˆ°æ•°ç»„æœ«å°¾ï¼Œå…¨éƒ¨æœ‰åºã€‚

{% highlight cpp %}
void insertionSort(vector<int>& list) {
    for (int i = 1; i < list.size(); ++i) {
        int key = list[i];
        int j = i - 1;
        while (j >= 0 && key < list[j]) {
            list[j+1] = list[j];
            j -= 1;
        }
        list[j+1] = key;
    }
}
{% endhighlight %}

# heap sort

å †æ’åºï¼Œåˆ©ç”¨æœ€å¤§å †æˆ–è€…æœ€å°å †ï¼Œé¦–å…ˆå»ºå †ï¼Œå‡è®¾ä¸ºæœ€å°å †ï¼Œæ¯æ¬¡å°†å †é¡¶å…ƒç´ å’Œæ•°ç»„ä¸­ 0-n è¿›è¡Œäº¤æ¢ï¼Œç›´åˆ°æœ€åæ•°ç»„æœ‰åºã€‚

{% highlight cpp %}
static bool compare(int num1, int num2) {
    return num1 > num2;
}

void heapSort(vector<int>& list) {
    vector<int> another = list;
    make_heap(another.begin(), another.end(), compare);
    int i = 0;
    while (i < list.size()) {
        swap(another[0], list[i]);
        ++i;
        pop_heap(another.begin(), another.end(), compare);
        another.pop_back();
    }
}
{% endhighlight %}

# çº¿æ€§æ’åº

ä¹‹å‰ç¬”è€…æ‰€åˆ—å‡ºçš„æ’åºéƒ½æ˜¯åŸºäºæ•°ç»„å…ƒç´ ç›¸äº’æ¯”è¾ƒçš„ï¼Œä¸‹é¢ä¸‰ç§æ’åºåˆ™ä½¿ç”¨ç©ºé—´æ¢å–æ—¶é—´çš„æ€è·¯ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ°çº¿æ€§ï¼Œä½†æ˜¯æœ‰ä¸ªå‰ææ¡ä»¶å°±æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ åœ¨æŸä¸ªèŒƒå›´å†…ã€‚

## counting sort & bucket sort

æˆ‘ä»¬å…ˆçœ‹ä¸€ç§ç‰¹æ®Šçš„æ¡¶æ’åºï¼Œå‡è®¾æˆ‘ä»¬æœ‰æ•°ç»„ {7, 9, 3, 8, 0}ï¼Œå‡è®¾æ•°ç»„ä¸­çš„å…ƒç´ èŒƒå›´ä» [0,10]ã€‚æ‰€è°“å»ºæ¡¶å…¶å®å°±æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„å…ƒç´ èŒƒå›´å¤§å°çš„æ•°ç»„æ¥è®°å½•æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
idx:    0 1 2 3 4 5 6 7 8 9 10

list:   7 9 3 8 0

bucket: 1 0 0 1 0 0 0 1 1 1 0
```

æˆ‘ä»¬æœ‰bucketåæˆ‘ä»¬åªéœ€è¦éå† bucke tå– bucket[i] æ¬¡ å¯¹åº”çš„ idx è¦†ç›–åŸå…ˆæ•°ç»„å³å¯ä½¿æ•°ç»„æœ‰åºï¼Œå‚è€ƒä»£ç å¦‚ä¸‹:

{% highlight cpp %}
/**
 list number range should be [0, k].
 */
void bucketSort(vector<int>& list, int k) {
    vector<int> bucket(k+1, 0);
    for(auto num: list) {
        bucket[num]++;
    }
    int idx = 0;
    for (int i = 0; i < k; ++i) {
        for (int j = 0; j < bucket[i]; ++j) {
            list[idx++] = i;
        }
    }
}
{% endhighlight %}

è®¡æ•°æ’åºåˆ™å’ŒğŸ‘†æ‰€è¿°çš„è¿™ç§æ¡¶æ’åºå¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥æ“ä½œï¼Œä¹‹å‰ bucket å­˜å‚¨æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œè€Œè®¡æ•°æ’åºéœ€è¦å¯¹ bucket è¿›è¡Œå¤šä¸€æ­¥çš„æ“ä½œï¼Œä» bucket ç´¢å¼•ä¸º1å¼€å§‹ç´¯åŠ  bucket çš„å…ƒç´ ï¼Œè¿˜æ˜¯ä»¥ä¹‹å‰çš„ä¾‹å­è¯´æ˜:

```
idx:        0 1 2 3 4 5 6 7 8 9 10

list:       7 9 3 8 0

bucket:     1 0 0 1 0 0 0 1 1 1 0

add_bucket: 1 1 1 2 2 2 2 3 4 5 5
```

ç°åœ¨ bucket ä¸­å­˜å‚¨çš„æ˜¯æ•°ç»„å…ƒç´ æ¬¡æ•°çš„ç´¯åŠ ï¼Œå…¶å®ä¹Ÿæ˜¯æ’åºåæ”¹å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œæ‰€ä»¥æˆ‘ä»¬éå†æ•°ç»„æ ¹æ®æ•°ç»„çš„ä¸­å€¼ï¼Œä¹Ÿå°±æ˜¯ bucket çš„ç´¢å¼•æ‰¾åˆ°ç´¯åŠ å€¼ï¼Œå°†è¯¥ç´¢å¼•å’Œæ•°ç»„çš„å€¼è¿›è¡Œæ›´æ–°æ•°ç»„ï¼Œå³å¯ä½¿æ•°ç»„æœ‰åºï¼Œå‚è€ƒä»£ç å¦‚ä¸‹:

{% highlight cpp %}
/**
 list number range should be [0, k]
 */
void countingSort(vector<int>& list, int k) {
    vector<int> tmp(list);
    vector<int> bucket(k+1, 0);
    for(auto num: list) {
        bucket[num]++;
    }
    for (int i = 1; i <= k; ++i) {
        bucket[i] += bucket[i-1];
    }
    
    for (int i = 0; i < list.size(); ++i) {
        int number = tmp[i];
        list[--bucket[number]] = number;
    }
}
{% endhighlight %}

æ”¹è¿›ç‰ˆæ¡¶æ’åºåˆ™ä½¿ç”¨æœ‰é™ä¸ªæ¡¶ï¼Œå°†æ•°ç»„çš„å…ƒç´ æŒ‰èŒƒå›´æ”¾åˆ°ä¸åŒçš„æ¡¶ä¸­ï¼Œä¾‹å¦‚æ•°ç»„ä¸º {11, 12, 1, 2, 21, 22, 41, 42, 31, 32}, å‡è®¾æˆ‘ä»¬å‡†å¤‡10ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶æ‰€è£…å…ƒç´ å¦‚ä¸‹æ‰€ç¤º:

```
k = 50, bucket_count = 10;
m = k / bucket_count;

list:  11,  12,  1,  2,  21,  22,  41,  42,  31,  32

bucket_idx = list[i] / m;

buckets:

| 2, 1    |     | null    |     | 12, 11  |     | null    |     | 22, 21  |
| ------- |     | ------- |     | ------- |     | ------- |     | ------- |
| bucket0 |     | bucket1 |     | bucket2 |     | bucket3 |     | bucket4 |

| null    |     | 32, 31  |     | null    |     | 42, 41  |     | null    |
| ------- |     | ------- |     | ------- |     | ------- |     | ------- |
| bucket5 |     | bucket6 |     | bucket7 |     | bucket8 |     | bucket9 |

```

ç„¶åéå†æ‰€æœ‰æ¡¶ä¸­å…ƒç´ ï¼Œå°†å…¶åŠ å…¥åˆ°åŸæ•°ç»„ï¼ŒåŒæ—¶å°†æ•°ç»„è¿›è¡Œéƒ¨åˆ†æ’åºï¼Œæœ€åå³å¯ä½¿æ•°ç»„æœ‰åºï¼Œå‚è€ƒä»£ç å¦‚ä¸‹:

{% highlight cpp %}
struct LinkList {
    LinkList *next;
    int value;
    LinkList(int v, LinkList *n):value(v),next(n){}
    ~LinkList() {if (next) delete next;}
};

void bucketSort2(vector<int>& list, int k) {
    int bucketNumber = 10;
    LinkList *buckets[bucketNumber], *p;
    int i, j, x;
    int m = k / bucketNumber;
    memset(buckets, 0, sizeof(buckets));
    
    for (int i = 0; i < list.size(); ++i) {
        x = list[i]/m;
        buckets[x] = new LinkList(list[i], buckets[x]);
    }
    
    for (x=j=0; x < bucketNumber; ++x) {
        i = j;
        cout << "bucket " << x << endl;
        for (p = buckets[x]; p; p=p->next) {
            cout << p->value << " ";
            list[j++] = p->value;
        }
        cout << "\nbucket " << x << endl;
        delete buckets[x];
        if (j > i) {
            partial_sort(list.begin()+i, list.begin()+(j-1), list.begin()+j);
        }
    }
}
{% endhighlight %}

## radix sort

åŸºæ•°æ’åºï¼Œå°†æ•°ç»„ä¸­çš„æ•°å­—æŒ‰ä½ï¼Œä»ä½åˆ°é«˜ï¼Œè¿›è¡Œä¸€æ¬¡è®¡æ•°æ’åºï¼Œæœ€åå³å¯ä½¿æ•°ç»„æœ‰åº,è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š

```
list:   7 19 3 278 190

original:       unit's digit sort       ten's digit sort        hundred's digit sort
007             190                     003                     003
019             003                     007                     007
003             007                     019                     019
278             278                     278                     190
190             019                     190                     278
```

ä¸‹é¢ç¬”è€…ç»™å‡ºå‚è€ƒä»£ç ï¼š

{% highlight cpp %}
void countingSort(vector<int>& list, int k, int carry) {
    int multiple = (int)pow(10, carry);
    vector<int> tmp(list);
    vector<int> bucket(k+1, 0);
    for (auto num: list) {
        int bit = (num / multiple) % 10;
        bucket[bit]++;
    }
    for (int i = 1; i <= k; ++i) {
        bucket[i] += bucket[i-1];
    }
    for (int i = (int)list.size()-1; i >= 0; --i) {
        int number = tmp[i];
        int bit = (number / multiple) % 10;
        list[--bucket[bit]] = number;
    }
}

void radixSort(vector<int>& list) {
    int carry = 0;
    int maxValue = *(max_element(list.begin(), list.end()));
    while (maxValue /= 10) {
        carry++;
    }

    for (int i = 0; i <= carry; ++i) {
        countingSort(list, 9, i);
    }
}
{% endhighlight %}

> éœ€è¦æ³¨æ„çš„æ˜¯ countingSort ä¸­æœ€åèµ‹å€¼åˆ°åŸæ•°ç»„çš„æ—¶å€™ï¼Œéœ€è¦ä»åå¾€å‰éå†ï¼Œè¿™æ ·ä¿æŒåŸå…ˆæ•°ç»„çš„ç›¸å¯¹é¡ºåºï¼Œå¦åˆ™ç»“æœå°±ä¸æ­£ç¡®äº†ã€‚
